CREATE TABLE actividad_economica (id BIGSERIAL, nombre VARCHAR(150), codigo VARCHAR(5), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE departamento (id BIGSERIAL, nombre VARCHAR(50) NOT NULL, abreviacion VARCHAR(3), codigo VARCHAR(2), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE distrito (id BIGSERIAL, localidad_id BIGINT NOT NULL, nombre VARCHAR(50) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE domicilio_legal (id BIGSERIAL, empresa_id BIGINT NOT NULL, localidad_id BIGINT NOT NULL, direccion VARCHAR(250) NOT NULL, numero VARCHAR(10) NOT NULL, edificio VARCHAR(150), telefono VARCHAR(15), fax VARCHAR(15), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE empresa (id BIGSERIAL, razon_social VARCHAR(500) NOT NULL, sigla VARCHAR(250), tipo_constitucion_empresa_id BIGINT NOT NULL, fecha_constitucion DATE, fecha_inicio_actividades DATE, numero_doc_constitucion VARCHAR(50), fecha_doc_constitucion DATE, actividad_economica_id BIGINT NOT NULL, nit VARCHAR(20), tipo_dependencia VARCHAR(255) NOT NULL, web VARCHAR(150), is_active BOOLEAN DEFAULT 'true', user_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE factura (id BIGSERIAL, razon_social VARCHAR(250) NOT NULL, nit VARCHAR(12) NOT NULL, numero BIGINT NOT NULL, numero_autorizacion BIGINT NOT NULL, fecha DATE NOT NULL, importe_total BIGINT, codigo_control VARCHAR(250) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE factura_compra (id BIGSERIAL, razon_social VARCHAR(250) NOT NULL, nit VARCHAR(12) NOT NULL, numero BIGINT NOT NULL, numero_autorizacion BIGINT NOT NULL, codigo_control VARCHAR(250) NOT NULL, fecha DATE NOT NULL, importe_total BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE factura_venta (id BIGSERIAL, numero BIGINT NOT NULL, numero_autorizacion BIGINT NOT NULL, fecha DATE NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE item (id BIGSERIAL, factura_compra_id BIGINT, factura_venta_id BIGINT, producto_id BIGINT, detalle VARCHAR(250) NOT NULL, precio_unitario BIGINT NOT NULL, cantidad BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE localidad (id BIGSERIAL, seguros_provincia_id BIGINT NOT NULL, nombre VARCHAR(150) NOT NULL, seccion VARCHAR(50), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE nota_venta (id BIGSERIAL, cliente VARCHAR(150), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE oficina_principal_sucursal (oficina_principal_id BIGINT, sucursal_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(oficina_principal_id, sucursal_id));
CREATE TABLE pais (id BIGSERIAL, codigo VARCHAR(3), nombre VARCHAR(150), continente VARCHAR(150), region VARCHAR(50), poblacion BIGINT, jefe_estado VARCHAR(100), capital TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE persona (id BIGSERIAL, foto VARCHAR(150), nombres VARCHAR(150) NOT NULL, ap_paterno VARCHAR(150), ap_materno VARCHAR(150), pais_origen_id BIGINT, num_documento_identidad VARCHAR(20), expedido_id BIGINT, tipo_documento_identidad VARCHAR(255), fecha_nacimiento DATE, fecha_fallecimiento DATE, lugar_nacimiento_id BIGINT, sexo VARCHAR(255), direccion_localidad_id BIGINT, zona VARCHAR(150), direccion VARCHAR(250), direccion_numero VARCHAR(50), email VARCHAR(150), telefono VARCHAR(50), celular VARCHAR(50), fallecido BOOLEAN DEFAULT 'false', created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE producto (id BIGSERIAL, nota_venta_id BIGINT, nombre VARCHAR(250) NOT NULL, modelo VARCHAR(250), marca VARCHAR(250), detalle VARCHAR(250), costo BIGINT NOT NULL, clasificacion_id BIGINT NOT NULL, sub_clasificacion_id BIGINT NOT NULL, stock BOOLEAN DEFAULT 'false', created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE provincia (id BIGSERIAL, seguros_departamento_id BIGINT NOT NULL, nombre VARCHAR(50) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE representante_legal (id BIGSERIAL, persona_id BIGINT NOT NULL, empresa_id BIGINT NOT NULL, num_testimonio_poder VARCHAR(20), fecha_testimonio_poder DATE, is_active BOOLEAN DEFAULT 'true', created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE tipo_constitucion_empresa (id BIGSERIAL, nombre VARCHAR(150) NOT NULL, sigla VARCHAR(5), codigo VARCHAR(2), is_active BOOLEAN DEFAULT 'true', created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE sf_guard_forgot_password (id BIGSERIAL, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at TIMESTAMP NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE sf_guard_group (id BIGSERIAL, name VARCHAR(255) UNIQUE, description VARCHAR(1000), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(group_id, permission_id));
CREATE TABLE sf_guard_permission (id BIGSERIAL, name VARCHAR(255) UNIQUE, description VARCHAR(1000), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE sf_guard_remember_key (id BIGSERIAL, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE sf_guard_user (id BIGSERIAL, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active BOOLEAN DEFAULT 'true', is_super_admin BOOLEAN DEFAULT 'false', last_login TIMESTAMP, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(id));
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(user_id, group_id));
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT, updated_by BIGINT, PRIMARY KEY(user_id, permission_id));
CREATE INDEX is_active_idx ON sf_guard_user (is_active);
ALTER TABLE actividad_economica ADD CONSTRAINT actividad_economica_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE actividad_economica ADD CONSTRAINT actividad_economica_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE departamento ADD CONSTRAINT departamento_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE departamento ADD CONSTRAINT departamento_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE distrito ADD CONSTRAINT distrito_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE distrito ADD CONSTRAINT distrito_localidad_id_localidad_id FOREIGN KEY (localidad_id) REFERENCES localidad(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE distrito ADD CONSTRAINT distrito_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE domicilio_legal ADD CONSTRAINT domicilio_legal_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE domicilio_legal ADD CONSTRAINT domicilio_legal_localidad_id_localidad_id FOREIGN KEY (localidad_id) REFERENCES localidad(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE domicilio_legal ADD CONSTRAINT domicilio_legal_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE empresa ADD CONSTRAINT etti FOREIGN KEY (tipo_constitucion_empresa_id) REFERENCES tipo_constitucion_empresa(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE empresa ADD CONSTRAINT empresa_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE empresa ADD CONSTRAINT empresa_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE empresa ADD CONSTRAINT empresa_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE empresa ADD CONSTRAINT empresa_actividad_economica_id_actividad_economica_id FOREIGN KEY (actividad_economica_id) REFERENCES actividad_economica(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE factura_compra ADD CONSTRAINT factura_compra_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE factura_compra ADD CONSTRAINT factura_compra_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE factura_venta ADD CONSTRAINT factura_venta_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE factura_venta ADD CONSTRAINT factura_venta_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE item ADD CONSTRAINT item_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE item ADD CONSTRAINT item_producto_id_producto_id FOREIGN KEY (producto_id) REFERENCES producto(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE item ADD CONSTRAINT item_factura_venta_id_factura_venta_id FOREIGN KEY (factura_venta_id) REFERENCES factura_venta(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE item ADD CONSTRAINT item_factura_compra_id_factura_compra_id FOREIGN KEY (factura_compra_id) REFERENCES factura_compra(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE item ADD CONSTRAINT item_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE localidad ADD CONSTRAINT localidad_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE localidad ADD CONSTRAINT localidad_seguros_provincia_id_provincia_id FOREIGN KEY (seguros_provincia_id) REFERENCES provincia(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE localidad ADD CONSTRAINT localidad_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE nota_venta ADD CONSTRAINT nota_venta_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE nota_venta ADD CONSTRAINT nota_venta_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE oficina_principal_sucursal ADD CONSTRAINT oficina_principal_sucursal_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE oficina_principal_sucursal ADD CONSTRAINT oficina_principal_sucursal_sucursal_id_empresa_id FOREIGN KEY (sucursal_id) REFERENCES empresa(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE oficina_principal_sucursal ADD CONSTRAINT oficina_principal_sucursal_oficina_principal_id_empresa_id FOREIGN KEY (oficina_principal_id) REFERENCES empresa(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE oficina_principal_sucursal ADD CONSTRAINT oficina_principal_sucursal_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE pais ADD CONSTRAINT pais_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE pais ADD CONSTRAINT pais_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE persona ADD CONSTRAINT persona_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE persona ADD CONSTRAINT persona_pais_origen_id_pais_id FOREIGN KEY (pais_origen_id) REFERENCES pais(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE persona ADD CONSTRAINT persona_lugar_nacimiento_id_localidad_id FOREIGN KEY (lugar_nacimiento_id) REFERENCES localidad(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE persona ADD CONSTRAINT persona_expedido_id_departamento_id FOREIGN KEY (expedido_id) REFERENCES departamento(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE persona ADD CONSTRAINT persona_direccion_localidad_id_localidad_id FOREIGN KEY (direccion_localidad_id) REFERENCES localidad(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE persona ADD CONSTRAINT persona_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE producto ADD CONSTRAINT producto_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE producto ADD CONSTRAINT producto_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE provincia ADD CONSTRAINT provincia_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE provincia ADD CONSTRAINT provincia_seguros_departamento_id_departamento_id FOREIGN KEY (seguros_departamento_id) REFERENCES departamento(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE provincia ADD CONSTRAINT provincia_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE representante_legal ADD CONSTRAINT representante_legal_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE representante_legal ADD CONSTRAINT representante_legal_persona_id_persona_id FOREIGN KEY (persona_id) REFERENCES persona(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE representante_legal ADD CONSTRAINT representante_legal_empresa_id_empresa_id FOREIGN KEY (empresa_id) REFERENCES empresa(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE representante_legal ADD CONSTRAINT representante_legal_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE tipo_constitucion_empresa ADD CONSTRAINT tipo_constitucion_empresa_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE tipo_constitucion_empresa ADD CONSTRAINT tipo_constitucion_empresa_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group ADD CONSTRAINT sf_guard_group_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group ADD CONSTRAINT sf_guard_group_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_permission ADD CONSTRAINT sf_guard_permission_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_permission ADD CONSTRAINT sf_guard_permission_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user ADD CONSTRAINT sf_guard_user_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user ADD CONSTRAINT sf_guard_user_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_updated_by_sf_guard_user_id FOREIGN KEY (updated_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_created_by_sf_guard_user_id FOREIGN KEY (created_by) REFERENCES sf_guard_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
